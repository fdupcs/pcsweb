import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,b as s,d as a,a as p,o as r}from"./app-C5igbyKq.js";const e="/assets/pic01-DdgvkPdh.png",c="/assets/pic02-yn7zPl4r.png",o="/assets/pic03-D1rV-RaL.png",d="/assets/pic04-CTJK-83A.png",u="/assets/pic05-IMIJVcxm.png",l="/assets/pic06-DXOyPqHc.png",g="/assets/pic07-BfLf2W7M.png",m="/assets/pic08-BbXwUcSt.png",f="/assets/pic09-CrKp_FsZ.png",h="/assets/pic10-C-npWkHf.png",b="/assets/pic11-GcVA6JZ7.png",x="/assets/pic12-MPqnMzFW.png",W="/assets/pic13-CfunXHtC.png",y="/assets/pic14-Ca6B7vLX.png",_="/assets/pic15-LNSJE_HR.png",w="/assets/pic16-CvKbttlJ.png",v="/assets/pic17-CLmV6-Sm.png",L="/assets/pic18-w4m092Kz.png",S="/assets/pic19-CCW7truw.png",z="/assets/pic20-ChvEqdLx.png",k="/assets/pic21-B503x6lK.png",U="/assets/pic22-BZg7yhez.png",C="/assets/pic23-Dysm1tgK.png",N="/assets/pic24-D-c8i-OW.png",A="/assets/pic25-DzIWFRym.png",T="/assets/pic26-BHeR5su0.png",P="/assets/pic27-DoGjYnxR.png",j="/assets/pic28-B7dWos18.png",D={};function B(V,i){return r(),t("div",null,[i[0]||(i[0]=s("p",null,"适用于 Linux 的 Windows 子系统 (WSL) 可让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。",-1)),a(" more "),i[1]||(i[1]=p('<h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介"><span>简介</span></a></h2><p>WSL 旨在为希望同时使用 Windows 和 Linux 的开发人员提供无缝高效的体验，其支持相当多的Linux发行版如 Ubuntu、Debian、Kali 等。且完全支持 Linux 常见的命令行工具，如 <code>bash</code>、<code>grep</code>、<code>sed</code>、<code>awk</code>。其还可以使用类似于 Unix 的命令行 shell 调用 Windows 应用程序。同时可以直接在 Windows 上运行 Linux 的图形应用程序，同时可以使用你电脑上的 GPU 进行机器学习相关的应用（效率高于 Windows）</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>本教程以 Ubuntu 22.04 版本的 WSL 2 安装为示例进行安装。</p><h3 id="wsl-2" tabindex="-1"><a class="header-anchor" href="#wsl-2"><span>WSL 2</span></a></h3><p>WSL 2 使用虚拟化技术在轻量级实用工具虚拟机 (VM) 中运行 Linux 内核。 Linux 发行版作为独立的容器在 WSL 2 托管 VM 内运行。 通过 WSL 2 运行的 Linux 发行版将共享同一网络命名空间、设备树（而非 <code>/dev/pts</code>）、CPU/内核/内存/交换空间、<code>/init</code> 二进制文件，但有自己的 PID 命名空间、装载命名空间、用户命名空间、<code>Cgroup</code>命名空间和 <code>init</code> 进程。如果你需要查看 WSL 1 和 WSL 2 的区别，请参考<a href="https://learn.microsoft.com/zh-cn/windows/wsl/compare-versions" target="_blank" rel="noopener noreferrer">比较 WSL 版本</a>。</p><p>对于绝大多数情况下的应用，你都应该选择 WSL 2 而不是 WSL 1，并且微软目前已经停止更新 WSL 1，其可能在之后取消支持。除非有特殊强调，本教程之后使用的 WSL 一词均为 WSL 2。</p><h3 id="前置条件" tabindex="-1"><a class="header-anchor" href="#前置条件"><span>前置条件</span></a></h3><p>要想在 Windows 系统中使用 WSL，你的 Windows 系统本身需要满足一些版本要求，如下表。</p><table><thead><tr><th>版本</th><th>是否支持 WSL(Y/N)</th></tr></thead><tbody><tr><td>Windows 95、98、XP、Vista、7、8、8.1</td><td>N</td></tr><tr><td>Windows 10（2004版本以下/内部版本 19041以及更低）</td><td>N</td></tr><tr><td>Windows 10（2004版本以上/内部版本 19041以及更高）</td><td>Y</td></tr><tr><td>Windows 11</td><td>Y</td></tr></tbody></table><h4 id="如何知道我的-windows-版本" tabindex="-1"><a class="header-anchor" href="#如何知道我的-windows-版本"><span>如何知道我的 Windows 版本</span></a></h4><p>键入 <code>Win+R</code> 快捷键。</p><figure><img src="'+e+'" alt="pic01" tabindex="0" loading="lazy"><figcaption>pic01</figcaption></figure><p>输入 <code>winver</code></p><figure><img src="'+c+'" alt="pic02" tabindex="0" loading="lazy"><figcaption>pic02</figcaption></figure><p>回车后可以看到如下界面。</p><figure><img src="'+o+'" alt="pic03" tabindex="0" loading="lazy"><figcaption>pic03</figcaption></figure><h3 id="启用相关功能" tabindex="-1"><a class="header-anchor" href="#启用相关功能"><span>启用相关功能</span></a></h3><p>键入 <code>Win+R</code> 快捷键。</p><figure><img src="'+e+'" alt="pic01" tabindex="0" loading="lazy"><figcaption>pic01</figcaption></figure><p>键入 <code>control</code></p><figure><img src="'+d+'" alt="pic04" tabindex="0" loading="lazy"><figcaption>pic04</figcaption></figure><p>来到控制面板</p><figure><img src="'+u+'" alt="pic05" tabindex="0" loading="lazy"><figcaption>pic05</figcaption></figure><p>找到 <code>程序和功能</code> 可以看到左侧有一个 <code>启用或关闭 Windows 功能</code></p><figure><img src="'+l+'" alt="pic06" tabindex="0" loading="lazy"><figcaption>pic06</figcaption></figure><p>勾选如图所示的两个选项后点击确定</p><figure><img src="'+g+'" alt="pic07" tabindex="0" loading="lazy"><figcaption>pic07</figcaption></figure><p>重启电脑</p><h3 id="更新并配置-wsl" tabindex="-1"><a class="header-anchor" href="#更新并配置-wsl"><span>更新并配置 WSL</span></a></h3><p>打开终端，输入 <code>wsl.exe --update</code> 如果显示找不到 <code>wsl.exe</code> 请重复上一步骤。</p><p><strong>此步骤可能需要管理员权限。</strong></p><figure><img src="'+m+'" alt="pic08" tabindex="0" loading="lazy"><figcaption>pic08</figcaption></figure><p>在更新完成后，输入 <code>wsl --set-default-version 2</code></p><figure><img src="'+f+'" alt="pic09" tabindex="0" loading="lazy"><figcaption>pic09</figcaption></figure><h3 id="下载-linux-发行版" tabindex="-1"><a class="header-anchor" href="#下载-linux-发行版"><span>下载 Linux 发行版</span></a></h3><p>打开微软商店，直接搜索 <code>ubuntu</code>。</p><figure><img src="'+h+'" alt="pic10" tabindex="0" loading="lazy"><figcaption>pic10</figcaption></figure><p>选择一个合适的版本点击下载，请注意没有带版本号的为最新版。本教程选择 Ubuntu 22.04.5 LTS。</p><p>如果你要其他发行版，微软商店提供了部分发行版的安装，如果你要求特殊（如 ArchLinux）可以去 GitHub 寻找<a href="https://github.com/yuk7/ArchWSL" target="_blank" rel="noopener noreferrer">方案</a>。</p><h3 id="安装-ubuntu" tabindex="-1"><a class="header-anchor" href="#安装-ubuntu"><span>安装 Ubuntu</span></a></h3><p>打开刚刚安装的 Ubuntu，会进入安装界面，需要你设置用户名和密码。</p><p>这里建议用户名和密码都使用英文，无其他要求。</p><figure><img src="'+b+'" alt="pic11" tabindex="0" loading="lazy"><figcaption>pic11</figcaption></figure><p>然后即可成功进入终端。</p><figure><img src="'+x+'" alt="pic12" tabindex="0" loading="lazy"><figcaption>pic12</figcaption></figure><p>WSL 与其他的虚拟机不一样的地方在于其没有桌面系统，基本上通过终端控制，但再开启 WSLg 后，使用 WSL 内的带 gui 的软件可以启动 gui（依旧没有桌面）。</p><h2 id="配置-wsl" tabindex="-1"><a class="header-anchor" href="#配置-wsl"><span>配置 WSL</span></a></h2><p>首先，强烈建议在 Windows 上使用 <code>Windows Terminal</code> 进行多终端的管理和切换，该应用在 Windows 11 无需安装，在 Windows 10 需要<a href="https://github.com/microsoft/terminal" target="_blank" rel="noopener noreferrer">手动安装</a>。</p><p>在 Windows Terminal 下，我们可以打开多个终端，我们新安装的 Ubuntu 也会在这里出现，点击即会打开 WSL。</p><figure><img src="'+W+'" alt="pic13" tabindex="0" loading="lazy"><figcaption>pic13</figcaption></figure><figure><img src="'+y+'" alt="pic14" tabindex="0" loading="lazy"><figcaption>pic14</figcaption></figure><h3 id="软件源更换" tabindex="-1"><a class="header-anchor" href="#软件源更换"><span>软件源更换</span></a></h3><p>新安装的 Ubuntu 其软件源默认为国外网址，在某些网络情况下可能会网络速度奇慢，故我们可以将软件源更换为国内镜像源。</p><figure><img src="'+_+'" alt="pic15" tabindex="0" loading="lazy"><figcaption>pic15</figcaption></figure><p>这里推荐清华源，其官方网址为：<a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener noreferrer">https://mirrors.tuna.tsinghua.edu.cn/</a>，其官网拥有换源的<a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/" target="_blank" rel="noopener noreferrer">详细教程</a>。</p><p>在终端，输入 <code>sudo vim /etc/apt/sources.list</code></p><figure><img src="'+w+'" alt="pic16" tabindex="0" loading="lazy"><figcaption>pic16</figcaption></figure><p>注释掉原有的源，即加一个 <code>#</code> 号</p><figure><img src="'+v+'" alt="pic17" tabindex="0" loading="lazy"><figcaption>pic17</figcaption></figure><figure><img src="'+L+`" alt="pic18" tabindex="0" loading="lazy"><figcaption>pic18</figcaption></figure><p>插入清华源的网址</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span></span>
<span class="line"><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span></span>
<span class="line"><span># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 以下安全更新软件源包含了官方源与镜像站配置，如有需要可自行修改注释切换</span></span>
<span class="line"><span>deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span></span>
<span class="line"><span># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 预发布软件源，不建议启用</span></span>
<span class="line"><span># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span></span>
<span class="line"><span># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+S+'" alt="pic19" tabindex="0" loading="lazy"><figcaption>pic19</figcaption></figure><p>保存该文件（如果不会 vim 可以尝试使用 nano）</p><p>键入 <code>sudo apt update</code> 即可使用新的软件源</p><figure><img src="'+z+'" alt="pic20" tabindex="0" loading="lazy"><figcaption>pic20</figcaption></figure><h3 id="设置更改" tabindex="-1"><a class="header-anchor" href="#设置更改"><span>设置更改</span></a></h3><p>对于较新版本的 WSL，在你安装后在开始菜单中会有一个 <code>WSL Settings</code>。</p><figure><img src="'+k+'" alt="pic21" tabindex="0" loading="lazy"><figcaption>pic21</figcaption></figure><p>里面可以进行一些虚拟机常见的设置。</p><figure><img src="'+U+'" alt="pic22" tabindex="0" loading="lazy"><figcaption>pic22</figcaption></figure><p>这里主要讲述一下网络设置。</p><p>如果你需要在 WSL 中部署一些服务并通过网络暴露端口，在 WSL 默认设置下其为 NAT 模式，同时 Windows 和 Linux 间还有防火墙，我们可以将其改为 Mirrored 模式，使得 WSL 的网络和宿主机一致，同时可以指定专门的端口给 Windows 进行使用（请指定高位端口）。</p><figure><img src="'+C+'" alt="pic23" tabindex="0" loading="lazy"><figcaption>pic23</figcaption></figure><h2 id="wsl-移动" tabindex="-1"><a class="header-anchor" href="#wsl-移动"><span>WSL 移动</span></a></h2><p>WSL 默认会在 <code>C</code> 盘存放其 vmx 文件，并且会占用极大的空间，很容易塞满 <code>C</code> 盘，这里提供一种移动的方法。</p><p>在终端中输入 <code>wsl -l -v</code></p><figure><img src="'+N+'" alt="pic24" tabindex="0" loading="lazy"><figcaption>pic24</figcaption></figure><p>如果其不为停止状态，请关闭正在运行的 WSL。如 <code>wsl -t Ubuntu-22.04</code></p><p>接下来输入 <code>wsl --export &lt;name&gt; &lt;Path&gt;</code> 在本例中为 <code>wsl --export Ubuntu-22.04 &quot;E:\\wsl\\ubuntu-ex.tar&quot;</code></p><figure><img src="'+A+'" alt="pic25" tabindex="0" loading="lazy"><figcaption>pic25</figcaption></figure><p>然后删除掉原先版本 <code>wsl --unregister &lt;name&gt;</code> 在本例中为 <code>wsl --unregister Ubuntu-22.04</code></p><figure><img src="'+T+'" alt="pic26" tabindex="0" loading="lazy"><figcaption>pic26</figcaption></figure><p>重新导入 WSL，输入 <code>wsl --import &lt;Distribution Name&gt; &lt;InstallLocation&gt; &lt;FileName&gt;</code> 在本例中为 <code>wsl --import Ubuntu-22.04 &quot;E:\\\\wsl&quot; &quot;E:\\\\wsl\\\\ubuntu-ex.tar&quot;</code></p><figure><img src="'+P+'" alt="pic27" tabindex="0" loading="lazy"><figcaption>pic27</figcaption></figure><p>默认的 Ubuntu 登录路径会变为 root，这里进行更改 <code>ubuntu2204.exe config --default-user pcs</code> 在本例中用户名为 pcs。</p><figure><img src="'+j+'" alt="pic28" tabindex="0" loading="lazy"><figcaption>pic28</figcaption></figure><p>至此便完成了 WSL 的移动。</p>',89))])}const G=n(D,[["render",B]]),M=JSON.parse('{"path":"/guides/wsl.html","title":"Windows Subsystem for Linux 使用教程","lang":"zh-CN","frontmatter":{"title":"Windows Subsystem for Linux 使用教程","author":"金兰","isOriginal":true,"icon":"fa-brands fa-linux","date":"2025-03-12T00:00:00.000Z","category":"教程","tag":["Windows","WSL"],"order":5,"description":"适用于 Linux 的 Windows 子系统 (WSL) 可让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows Subsystem for Linux 使用教程\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-03-12T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-04T08:55:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"金兰\\"}]}"],["meta",{"property":"og:url","content":"https://fdupcs.top/guides/wsl.html"}],["meta",{"property":"og:site_name","content":"PCS 服务队"}],["meta",{"property":"og:title","content":"Windows Subsystem for Linux 使用教程"}],["meta",{"property":"og:description","content":"适用于 Linux 的 Windows 子系统 (WSL) 可让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-04T08:55:40.000Z"}],["meta",{"property":"article:author","content":"金兰"}],["meta",{"property":"article:tag","content":"WSL"}],["meta",{"property":"article:tag","content":"Windows"}],["meta",{"property":"article:published_time","content":"2025-03-12T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-04T08:55:40.000Z"}]]},"git":{"createdTime":1741785016000,"updatedTime":1756976140000,"contributors":[{"name":"Alex6357","username":"Alex6357","email":"73743056+Alex6357@users.noreply.github.com","commits":2,"url":"https://github.com/Alex6357"}]},"readingTime":{"minutes":5.73,"words":1720},"filePathRelative":"guides/wsl.md","excerpt":"<p>适用于 Linux 的 Windows 子系统 (WSL) 可让开发人员直接在 Windows 上按原样运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置开销。</p>\\n","autoDesc":true}');export{G as comp,M as data};
